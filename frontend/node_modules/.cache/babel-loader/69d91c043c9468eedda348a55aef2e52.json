{"ast":null,"code":"import _slicedToArray from \"/Users/georgie/Desktop/Repositories/JWTApp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/georgie/Desktop/Repositories/JWTApp/frontend/src/components/Protected.js\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport { UserContext } from '../App';\n\nconst Protected = () => {\n  const _useContext = useContext(UserContext),\n        _useContext2 = _slicedToArray(_useContext, 1),\n        user = _useContext2[0];\n\n  const _useState = useState('You need to login'),\n        _useState2 = _slicedToArray(_useState, 2),\n        content = _useState2[0],\n        setContent = _useState2[1];\n\n  useEffect(() => {\n    async function fetchProtected() {\n      const result = await (await fetch('http://localhost:4000/protected', {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          authorization: `Bearer ${user.accesstoken}`\n        }\n      })).json();\n      console.log('user: ', user);\n      console.log('result: ', result);\n\n      if (user.accesstoken !== null) {\n        setContent('Protected data');\n      }\n    }\n\n    fetchProtected();\n  }, [user]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, content);\n};\n\nexport default Protected;","map":{"version":3,"sources":["/Users/georgie/Desktop/Repositories/JWTApp/frontend/src/components/Protected.js"],"names":["React","useEffect","useState","useContext","UserContext","Protected","user","content","setContent","fetchProtected","result","fetch","method","credentials","headers","authorization","accesstoken","json","console","log"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,WAAT,QAA4B,QAA5B;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA,sBACPF,UAAU,CAACC,WAAD,CADH;AAAA;AAAA,QACfE,IADe;;AAAA,oBAEQJ,QAAQ,CAAC,mBAAD,CAFhB;AAAA;AAAA,QAEfK,OAFe;AAAA,QAENC,UAFM;;AAItBP,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeQ,cAAf,GAAgC;AAC9B,YAAMC,MAAM,GAAG,MAAM,CACnB,MAAMC,KAAK,CAAC,iCAAD,EAAoC;AAC7CC,QAAAA,MAAM,EAAE,MADqC;AAE7CC,QAAAA,WAAW,EAAE,SAFgC;AAG7CC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,UAAST,IAAI,CAACU,WAAY;AAFnC;AAHoC,OAApC,CADQ,EASnBC,IATmB,EAArB;AAUAC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBb,IAAtB;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBT,MAAxB;;AACA,UAAIJ,IAAI,CAACU,WAAL,KAAqB,IAAzB,EAA+B;AAC7BR,QAAAA,UAAU,CAAC,gBAAD,CAAV;AACD;AACF;;AACDC,IAAAA,cAAc;AACf,GAnBQ,EAmBN,CAACH,IAAD,CAnBM,CAAT;AAqBA,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMC,OAAN,CAAP;AACD,CA1BD;;AA4BA,eAAeF,SAAf","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { UserContext } from '../App';\n\nconst Protected = () => {\n  const [user] = useContext(UserContext);\n  const [content, setContent] = useState('You need to login');\n\n  useEffect(() => {\n    async function fetchProtected() {\n      const result = await (\n        await fetch('http://localhost:4000/protected', {\n          method: 'POST',\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json',\n            authorization: `Bearer ${user.accesstoken}`\n          }\n        })\n      ).json();\n      console.log('user: ', user);\n      console.log('result: ', result);\n      if (user.accesstoken !== null) {\n        setContent('Protected data');\n      }\n    }\n    fetchProtected();\n  }, [user]);\n\n  return <div>{content}</div>;\n};\n\nexport default Protected;\n"]},"metadata":{},"sourceType":"module"}